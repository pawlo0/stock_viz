<head>
  <title>stock_viz</title>
  <script src="vis.js"></script>
</head>

<body>
  <div class="container">
    {{> stock_viz}}
  </div>	
</body>

<template name="stock_viz">
  <div class="row">
  	<div class="col-md-6">
  			{{>stock_viz_controls}}
  			{{>stock_groups}}
  	</div>
  	<div class="col-md-6">
  			{{>stock_vizjs}}
  	</div>
  </div>
  <div class="row">
  	<div class="col-md-4">
  		{{>stock_viz_3d_controls}}
  	</div>
  	<div class="col-md-8">
  		{{>stock_viz3d}}
  	</div>
  </div>
</template>

<template name="stock_viz_3d_controls">
	<h3>Select data for the 3d graph</h3>
	<form>
		X-Axis:
		<select class="form-control js-select-x-3d-data">
			{{#each get_data_for_3d "x_axis"}}
			  <option value="{{name}}" {{isSelected}}>{{name}}</option>
			{{/each}}
		</select>
		<br/>
		Y-Axis:
		<select class="form-control js-select-y-3d-data">
			{{#each get_data_for_3d "y_axis"}}
			  <option value="{{name}}" {{isSelected}}>{{name}}</option>
			{{/each}}
		</select>
		<br/>
		Z-Axis:
		<select class="form-control js-select-z-3d-data">
			{{#each get_data_for_3d "z_axis"}}
			  <option value="{{name}}" {{isSelected}}>{{name}}</option>
			{{/each}}
		</select>
		<br/>	
		Dots size:
		<select class="form-control js-select-zvalue-3d-data">
			{{#each get_data_for_3d "z_value"}}
			  <option value="{{name}}" {{isSelected}}>{{name}}</option>
			{{/each}}
		</select>
		<br/>
		<button class="btn btn-default js-show-3d">Draw 3d Graph</button>
	</form>
</template>

<template name="stock_viz3d">
	<div id="visjs3d"></div>	
</template>
	
<template name="stock_viz_controls">
	<form>
		<!-- list of available single features -->
		Compare fundamental data:
		<br/>
		<select class="js-select-single-fundamental">
			{{#each get_fundamental_names}}
			  <option value="{{name}}" id="{{name}}">{{name}}</option>
			{{/each}}
		</select>
		<select class="js-select-grouping">
			{{#each get_groups}}
			<option value="{{group}}" id="{{group}}">By {{group}}</option>
			{{/each}}
		</select>
		{{selects}}
		<button class="btn js-show-blobs">Network view</button>
	</form>
</template>

<template name="stock_groups">
	<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
		{{#each get_groups}}
			<div class="panel panel-default">
				<div class="panel-heading" role="tab" id="heading-{{group_name2}}">
				  <h4 class="panel-title">
				    <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-{{group_name2}}" aria-expanded="false" aria-controls="collapse-{{group_name2}}">
				      {{group_name}}
				    </a>
				  </h4>
				</div>
				<div id="collapse-{{group_name2}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading-{{group_name2}}">
				  <div class="panel-body">
				    {{> stock_fundamentals_list group_name=group_name}}
				  </div>
				</div>
			</div>		
		{{/each}}
	</div>
</template>

<template name="stock_fundamentals_list">
	<div class="row">
		<div class="col-xs-2">
			<h5>Ticker symbol</h5>
		</div>
		<div class="col-xs-6">
			<h5>Company name</h5>
		</div>
		<div class="col-xs-4">
			<h5>{{study}}</h5>
		</div>
	</div>
	<hr>
	{{#each get_fundamental_values group_name}}
		<div class="row">
		  <div class="col-xs-2">
		    {{symbol}}
		  </div>
		  <div class="col-xs-7">
		    {{name}}
		  </div>
		  <div class="col-xs-3">
		    {{value}}
		  </div>
		</div>
	{{/each}}
</template>

<template name="stock_vizjs">
	<div id="visjs"></div>
</template>